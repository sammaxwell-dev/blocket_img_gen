# User Stories + Acceptance Criteria

## Epic 1: Загрузка и обработка фото

### US-1.1: Загрузка фото с телефона
**As a** продавец с телефона  
**I want to** загрузить фото из галереи или камеры  
**So that** я могу улучшить их для объявления

**Acceptance Criteria:**
- [ ] Кнопка "Загрузить фото" открывает системный picker (камера/галерея)
- [ ] Поддержка форматов: JPG, PNG, HEIC, WebP
- [ ] Максимум 10 фото за раз
- [ ] Максимум 10MB на файл
- [ ] Показ превью загруженных фото
- [ ] Возможность удалить фото до обработки

---

### US-1.2: Загрузка фото с десктопа
**As a** продавец с компьютера  
**I want to** перетащить фото drag&drop  
**So that** я могу быстро загрузить несколько файлов

**Acceptance Criteria:**
- [ ] Drag&drop зона на главной странице
- [ ] Клик по зоне открывает file picker
- [ ] Визуальный feedback при перетаскивании (border highlight)
- [ ] Те же лимиты: 10 фото, 10MB, форматы JPG/PNG/HEIC/WebP

---

### US-1.3: Обработка фото AI
**As a** продавец  
**I want to** автоматически улучшить мои фото  
**So that** они выглядят профессионально без ручной работы

**Acceptance Criteria:**
- [ ] После загрузки → автоматический старт обработки
- [ ] Progress bar для каждого фото
- [ ] Обработка 1 фото < 15 сек
- [ ] Обработка батча 5 фото < 45 сек
- [ ] При ошибке API → fallback (показ оригинала + warning)
- [ ] Результат: фон удалён/заменён на белый, свет скорректирован, кроп 1:1

---

### US-1.4: Предпросмотр до/после
**As a** продавец  
**I want to** сравнить оригинал и результат  
**So that** я могу убедиться в качестве

**Acceptance Criteria:**
- [ ] Карусель с готовыми фото
- [ ] Toggle/slider "До / После" на каждом фото
- [ ] Zoom при клике (мобильный pinch-zoom)
- [ ] Кнопка "Скачать все" видна

---

### US-1.5: Скачивание результата
**As a** продавец  
**I want to** скачать готовые фото одним архивом  
**So that** я могу сразу загрузить их на Blocket

**Acceptance Criteria:**
- [ ] Кнопка "Скачать ZIP"
- [ ] ZIP содержит все обработанные фото (original_1_optimized.jpg, etc.)
- [ ] Формат: JPG, качество 90%
- [ ] Размер: 1200×1200 (или исходный если меньше)
- [ ] После скачивания — фото удаляются с сервера через 24ч

---

## Epic 2: Аутентификация и лимиты

### US-2.1: Анонимное использование (Free)
**As a** новый пользователь  
**I want to** попробовать сервис без регистрации  
**So that** я могу оценить качество

**Acceptance Criteria:**
- [ ] Лимит 5 фото/день без регистрации
- [ ] Counter на UI: "Осталось 3 из 5 бесплатных фото сегодня"
- [ ] Лимит сбрасывается в 00:00 CET
- [ ] При исчерпании → предложение зарегистрироваться/подписаться

---

### US-2.2: Регистрация
**As a** пользователь  
**I want to** создать аккаунт  
**So that** мой лимит сохраняется и я могу оформить подписку

**Acceptance Criteria:**
- [ ] Регистрация через Google OAuth (primary)
- [ ] Magic link на email (fallback)
- [ ] После регистрации: free лимит 5 фото/день сохраняется
- [ ] Показ статуса подписки в header

---

### US-2.3: Оформление подписки
**As a** активный пользователь  
**I want to** оплатить подписку  
**So that** я могу обрабатывать unlimited фото

**Acceptance Criteria:**
- [ ] Страница /pricing с одним тарифом: 99 SEK/мес
- [ ] Кнопка "Подписаться" → Stripe Checkout
- [ ] Поддержка: карта, Klarna
- [ ] После оплаты: редирект назад, статус "Pro" активен
- [ ] Email-подтверждение от Stripe

---

### US-2.4: Управление подпиской
**As a** подписчик  
**I want to** отменить подписку  
**So that** я не плачу если больше не использую

**Acceptance Criteria:**
- [ ] Страница /account с датой следующего платежа
- [ ] Кнопка "Отменить подписку" → Stripe Customer Portal
- [ ] После отмены: доступ сохраняется до конца оплаченного периода
- [ ] Email-уведомление об отмене

---

## Epic 3: UX и onboarding

### US-3.1: Landing page
**As a** посетитель  
**I want to** понять что делает сервис за 5 секунд  
**So that** я решу попробовать

**Acceptance Criteria:**
- [ ] Hero: заголовок + до/после пример
- [ ] CTA: "Улучшить фото бесплатно"
- [ ] 3 шага: Загрузи → Подожди 10 сек → Скачай
- [ ] Social proof (когда появятся отзывы)
- [ ] Footer: ссылки на Terms, Privacy

---

### US-3.2: Мобильная адаптация
**As a** мобильный пользователь  
**I want to** удобно пользоваться сервисом с телефона  
**So that** я могу улучшать фото "на ходу"

**Acceptance Criteria:**
- [ ] Responsive design (mobile-first)
- [ ] Touch-friendly кнопки (min 44px)
- [ ] Камера открывается нативно
- [ ] Скачивание ZIP работает на iOS/Android

---

## Epic 4: Админка и мониторинг (internal)

### US-4.1: Аналитика использования
**As a** owner  
**I want to** видеть ключевые метрики  
**So that** я понимаю как растёт продукт

**Acceptance Criteria:**
- [ ] Vercel Analytics подключен
- [ ] Events: photo_uploaded, photo_processed, download_zip, subscription_started
- [ ] Dashboard с DAU, обработанных фото, конверсией

---

## Priority Matrix

| Story | Priority | Effort | Sprint |
|-------|----------|--------|--------|
| US-1.1 | Must | M | 1 |
| US-1.2 | Must | S | 1 |
| US-1.3 | Must | L | 1 |
| US-1.4 | Must | M | 1 |
| US-1.5 | Must | S | 1 |
| US-2.1 | Must | M | 1 |
| US-2.2 | Should | M | 1 |
| US-2.3 | Must | M | 2 |
| US-2.4 | Should | S | 2 |
| US-3.1 | Must | M | 1 |
| US-3.2 | Must | M | 1-2 |
| US-4.1 | Should | S | 2 |
